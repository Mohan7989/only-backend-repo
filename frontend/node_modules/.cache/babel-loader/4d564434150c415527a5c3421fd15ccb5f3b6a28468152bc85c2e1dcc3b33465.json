{"ast":null,"code":"import _objectSpread from\"D:/MRAC Students Website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import MaterialsList from'../components/MaterialsList';import{fetchMaterials}from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SUBJECTS=['All','Telugu','English','Physics','Maths','Chemistry','Computer'];const YEARS=['All','2020','2021','2022','2023','2024','2025'];const TYPES=['All','question paper','notes','all'];export default function SemesterPage(){const{slug}=useParams();const[filters,setFilters]=useState({semester:slug,group:'',subject:'All',year:'All',type:'All'});const[materials,setMaterials]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{// fetch initial items (recent)\nloadMaterials(filters);// eslint-disable-next-line\n},[slug]);const loadMaterials=async f=>{setLoading(true);try{const res=await fetchMaterials({semester:f.semester,subject:f.subject!=='All'?f.subject:undefined,group:f.group||undefined,year:f.year!=='All'?f.year:undefined,type:f.type!=='All'?f.type:undefined});// if backend returns {items: []}\nsetMaterials(res.items||demoFetch(f));}catch(err){// fallback demo\nsetMaterials(demoFetch(f));}finally{setLoading(false);}};const onSubmit=e=>{e.preventDefault();loadMaterials(filters);};function demoFetch(f){// small demo dataset: only show items when semester includes 'sem-'\nif(!f||!f.semester)return[];// show some mock if sem-2 or sem-1 etc else empty\nif(f.semester.startsWith('sem')){return[{id:'demo-1',title:\"\".concat(f.semester.toUpperCase(),\" - Sample Question Paper\"),subject:f.subject==='All'?'Physics':f.subject,semester:f.semester,year:f.year==='All'?'2024':f.year,description:'Mock sample question paper uploaded for demo',fileUrl:null// null means pending in demo\n}];}// internships show no items demo\nreturn[];}return/*#__PURE__*/_jsxs(\"div\",{className:\"semester-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-inner\",children:[/*#__PURE__*/_jsx(\"h2\",{children:filters.semester.replace('-',' ').toUpperCase()}),/*#__PURE__*/_jsx(\"p\",{children:\"Find materials, question papers and notes for this semester\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"filter-form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Semester\",/*#__PURE__*/_jsx(\"input\",{value:filters.semester,readOnly:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Group (optional)\",/*#__PURE__*/_jsx(\"input\",{value:filters.group,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{group:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Subject\",/*#__PURE__*/_jsx(\"select\",{value:filters.subject,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{subject:e.target.value})),children:SUBJECTS.map(s=>/*#__PURE__*/_jsx(\"option\",{children:s},s))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Year\",/*#__PURE__*/_jsx(\"select\",{value:filters.year,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{year:e.target.value})),children:YEARS.map(y=>/*#__PURE__*/_jsx(\"option\",{children:y},y))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Material\",/*#__PURE__*/_jsx(\"select\",{value:filters.type,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{type:e.target.value})),children:TYPES.map(t=>/*#__PURE__*/_jsx(\"option\",{children:t},t))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\",style:{alignSelf:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Search\"})})]})]}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:'1rem'},children:\"Results\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(MaterialsList,{items:materials})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","MaterialsList","fetchMaterials","jsx","_jsx","jsxs","_jsxs","SUBJECTS","YEARS","TYPES","SemesterPage","slug","filters","setFilters","semester","group","subject","year","type","materials","setMaterials","loading","setLoading","loadMaterials","f","res","undefined","items","demoFetch","err","onSubmit","e","preventDefault","startsWith","id","title","concat","toUpperCase","description","fileUrl","className","children","replace","value","readOnly","onChange","_objectSpread","target","map","s","y","t","style","alignSelf","marginTop"],"sources":["D:/MRAC Students Website/frontend/src/pages/SemesterPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport MaterialsList from '../components/MaterialsList';\r\nimport { fetchMaterials } from '../api/api';\r\n\r\nconst SUBJECTS = ['All', 'Telugu', 'English', 'Physics', 'Maths', 'Chemistry', 'Computer'];\r\nconst YEARS = ['All', '2020', '2021', '2022', '2023', '2024', '2025'];\r\nconst TYPES = ['All', 'question paper', 'notes', 'all'];\r\n\r\nexport default function SemesterPage() {\r\n  const { slug } = useParams();\r\n  const [filters, setFilters] = useState({\r\n    semester: slug,\r\n    group: '',\r\n    subject: 'All',\r\n    year: 'All',\r\n    type: 'All'\r\n  });\r\n  const [materials, setMaterials] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // fetch initial items (recent)\r\n    loadMaterials(filters);\r\n    // eslint-disable-next-line\r\n  }, [slug]);\r\n\r\n  const loadMaterials = async (f) => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetchMaterials({\r\n        semester: f.semester,\r\n        subject: f.subject !== 'All' ? f.subject : undefined,\r\n        group: f.group || undefined,\r\n        year: f.year !== 'All' ? f.year : undefined,\r\n        type: f.type !== 'All' ? f.type : undefined\r\n      });\r\n      // if backend returns {items: []}\r\n      setMaterials(res.items || demoFetch(f));\r\n    } catch (err) {\r\n      // fallback demo\r\n      setMaterials(demoFetch(f));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    loadMaterials(filters);\r\n  };\r\n\r\n  function demoFetch(f) {\r\n    // small demo dataset: only show items when semester includes 'sem-'\r\n    if (!f || !f.semester) return [];\r\n    // show some mock if sem-2 or sem-1 etc else empty\r\n    if (f.semester.startsWith('sem')) {\r\n      return [\r\n        {\r\n          id: 'demo-1',\r\n          title: `${f.semester.toUpperCase()} - Sample Question Paper`,\r\n          subject: f.subject === 'All' ? 'Physics' : f.subject,\r\n          semester: f.semester,\r\n          year: f.year === 'All' ? '2024' : f.year,\r\n          description: 'Mock sample question paper uploaded for demo',\r\n          fileUrl: null // null means pending in demo\r\n        }\r\n      ];\r\n    }\r\n    // internships show no items demo\r\n    return [];\r\n  }\r\n\r\n  return (\r\n    <div className=\"semester-page\">\r\n      <div className=\"hero\">\r\n        <div className=\"hero-inner\">\r\n          <h2>{filters.semester.replace('-', ' ').toUpperCase()}</h2>\r\n          <p>Find materials, question papers and notes for this semester</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <form className=\"filter-form\" onSubmit={onSubmit}>\r\n          <div className=\"row\">\r\n            <label>Semester\r\n              <input value={filters.semester} readOnly />\r\n            </label>\r\n\r\n            <label>Group (optional)\r\n              <input value={filters.group} onChange={(e)=>setFilters({...filters, group:e.target.value})} />\r\n            </label>\r\n\r\n            <label>Subject\r\n              <select value={filters.subject} onChange={(e)=>setFilters({...filters, subject:e.target.value})}>\r\n                {SUBJECTS.map(s=> <option key={s}>{s}</option>)}\r\n              </select>\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <label>Year\r\n              <select value={filters.year} onChange={(e)=>setFilters({...filters, year:e.target.value})}>\r\n                {YEARS.map(y=> <option key={y}>{y}</option>)}\r\n              </select>\r\n            </label>\r\n\r\n            <label>Material\r\n              <select value={filters.type} onChange={(e)=>setFilters({...filters, type:e.target.value})}>\r\n                {TYPES.map(t=> <option key={t}>{t}</option>)}\r\n              </select>\r\n            </label>\r\n\r\n            <div className=\"actions\" style={{ alignSelf: 'flex-end' }}>\r\n              <button className=\"btn\" type=\"submit\">Search</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <h3 style={{ marginTop: '1rem' }}>Results</h3>\r\n        {loading ? <p>Loading...</p> : <MaterialsList items={materials} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}