{"ast":null,"code":"import _objectSpread from\"D:/MRAC Students Website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{uploadMaterial}from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadSection(){const[form,setForm]=useState({title:'',subject:'',group:'',type:'pdf',year:'2025',semester:'Sem-1',uploaderName:''});const[file,setFile]=useState(null);const[msg,setMsg]=useState(null);const[loading,setLoading]=useState(false);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleFile=e=>setFile(e.target.files[0]);const submit=async e=>{e.preventDefault();if(!file)return setMsg('Please select a file to upload.');const fd=new FormData();fd.append('file',file);fd.append('title',form.title);fd.append('subject',form.subject);fd.append('group',form.group);fd.append('type',form.type);fd.append('year',form.year);fd.append('semester',form.semester);fd.append('uploaderName',form.uploaderName);setLoading(true);try{// calls backend API; if backend not ready this will fail - catch below\nconst res=await uploadMaterial(fd);setMsg('Upload submitted — pending admin approval.');setForm({title:'',subject:'',group:'',type:'pdf',year:'2025',semester:'Sem-1',uploaderName:''});setFile(null);// reset file input value by using a key or controlled input in actual implementation\n}catch(err){console.error(err);setMsg('Upload failed (backend may be offline). Data saved locally in demo mode.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"section\",{id:\"upload\",className:\"upload-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Upload Study Material / Question Paper\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"upload-form\",onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Title\",/*#__PURE__*/_jsx(\"input\",{name:\"title\",value:form.title,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Subject\",/*#__PURE__*/_jsx(\"input\",{name:\"subject\",value:form.subject,onChange:handleChange,placeholder:\"e.g., Physics\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Group (optional)\",/*#__PURE__*/_jsx(\"input\",{name:\"group\",value:form.group,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Type\",/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:form.type,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"pdf\",children:\"PDF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"image\",children:\"Image\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Year\",/*#__PURE__*/_jsxs(\"select\",{name:\"year\",value:form.year,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2020\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2021\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2022\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2023\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2024\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2025\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Semester\",/*#__PURE__*/_jsxs(\"select\",{name:\"semester\",value:form.semester,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Sem-1\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sem-2\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sem-3\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sem-4\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sem-5\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sem-6\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Internship-1\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Internship-2\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Uploader Name (optional)\",/*#__PURE__*/_jsx(\"input\",{name:\"uploaderName\",value:form.uploaderName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"File \",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf,image/*\",onChange:handleFile,required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",disabled:loading,children:loading?'Submitting...':'Submit Upload'})}),msg&&/*#__PURE__*/_jsx(\"div\",{className:\"form-msg\",children:msg})]})]});}","map":{"version":3,"names":["React","useState","uploadMaterial","jsx","_jsx","jsxs","_jsxs","UploadSection","form","setForm","title","subject","group","type","year","semester","uploaderName","file","setFile","msg","setMsg","loading","setLoading","handleChange","e","_objectSpread","target","name","value","handleFile","files","submit","preventDefault","fd","FormData","append","res","err","console","error","id","className","children","onSubmit","onChange","required","placeholder","accept","disabled"],"sources":["D:/MRAC Students Website/frontend/src/components/UploadSection.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { uploadMaterial } from '../api/api';\r\n\r\nexport default function UploadSection() {\r\n  const [form, setForm] = useState({\r\n    title: '',\r\n    subject: '',\r\n    group: '',\r\n    type: 'pdf',\r\n    year: '2025',\r\n    semester: 'Sem-1',\r\n    uploaderName: ''\r\n  });\r\n  const [file, setFile] = useState(null);\r\n  const [msg, setMsg] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n  const handleFile = (e) => setFile(e.target.files[0]);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    if (!file) return setMsg('Please select a file to upload.');\r\n    const fd = new FormData();\r\n    fd.append('file', file);\r\n    fd.append('title', form.title);\r\n    fd.append('subject', form.subject);\r\n    fd.append('group', form.group);\r\n    fd.append('type', form.type);\r\n    fd.append('year', form.year);\r\n    fd.append('semester', form.semester);\r\n    fd.append('uploaderName', form.uploaderName);\r\n    setLoading(true);\r\n    try {\r\n      // calls backend API; if backend not ready this will fail - catch below\r\n      const res = await uploadMaterial(fd);\r\n      setMsg('Upload submitted — pending admin approval.');\r\n      setForm({\r\n        title: '',\r\n        subject: '',\r\n        group: '',\r\n        type: 'pdf',\r\n        year: '2025',\r\n        semester: 'Sem-1',\r\n        uploaderName: ''\r\n      });\r\n      setFile(null);\r\n      // reset file input value by using a key or controlled input in actual implementation\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMsg('Upload failed (backend may be offline). Data saved locally in demo mode.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section id=\"upload\" className=\"upload-section\">\r\n      <h3>Upload Study Material / Question Paper</h3>\r\n      <form className=\"upload-form\" onSubmit={submit}>\r\n        <div className=\"row\">\r\n          <label>Title<input name=\"title\" value={form.title} onChange={handleChange} required /></label>\r\n          <label>Subject<input name=\"subject\" value={form.subject} onChange={handleChange} placeholder=\"e.g., Physics\" required /></label>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <label>Group (optional)<input name=\"group\" value={form.group} onChange={handleChange} /></label>\r\n          <label>Type\r\n            <select name=\"type\" value={form.type} onChange={handleChange}>\r\n              <option value=\"pdf\">PDF</option>\r\n              <option value=\"image\">Image</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <label>Year\r\n            <select name=\"year\" value={form.year} onChange={handleChange}>\r\n              <option>All</option>\r\n              <option>2020</option>\r\n              <option>2021</option>\r\n              <option>2022</option>\r\n              <option>2023</option>\r\n              <option>2024</option>\r\n              <option>2025</option>\r\n            </select>\r\n          </label>\r\n          <label>Semester\r\n            <select name=\"semester\" value={form.semester} onChange={handleChange}>\r\n              <option>Sem-1</option>\r\n              <option>Sem-2</option>\r\n              <option>Sem-3</option>\r\n              <option>Sem-4</option>\r\n              <option>Sem-5</option>\r\n              <option>Sem-6</option>\r\n              <option>Internship-1</option>\r\n              <option>Internship-2</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <label>Uploader Name (optional)<input name=\"uploaderName\" value={form.uploaderName} onChange={handleChange} /></label>\r\n          <label>File <input type=\"file\" accept=\".pdf,image/*\" onChange={handleFile} required /></label>\r\n        </div>\r\n\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\" className=\"btn\" disabled={loading}>{loading ? 'Submitting...' : 'Submit Upload'}</button>\r\n        </div>\r\n\r\n        {msg && <div className=\"form-msg\">{msg}</div>}\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}